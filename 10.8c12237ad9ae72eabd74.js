(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{F4UR:function(n,t,e){"use strict";e.r(t),e.d(t,"LoginPageModule",function(){return g});var i=e("ofXK"),o=e("3Pt+"),r=e("TEn/"),a=e("tyNb"),s=e("mrSG"),c=e("fXoL"),l=e("xwiS");let d=(()=>{class n{constructor(n){this.baseClient=n}login(n){return Object(s.a)(this,void 0,void 0,function*(){return this.baseClient.doPost("/admin/login",!1,n)})}}return n.\u0275fac=function(t){return new(t||n)(c.Rb(l.a))},n.\u0275prov=c.Gb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=e("ri4K");const u=[{path:"",component:(()=>{class n{constructor(n,t,e,i){this.loginApiClient=n,this.authenticationService=t,this.alertController=e,this.router=i}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){})}ionViewWillEnter(){return Object(s.a)(this,void 0,void 0,function*(){this.authenticationService.isAuthenticated()&&(yield this.navigateAwayFromLogin())})}onLoginClick(){return Object(s.a)(this,void 0,void 0,function*(){const n={phoneNumber:this.phoneNumberModel,password:this.passwordModel};let t=null;try{t=yield this.loginApiClient.login(n)}catch(i){return void(yield this.showLoginFailedAlert())}if(!t.success)return void(yield this.showLoginFailedAlert());const e=t.token;yield this.authenticationService.storeToken(e),yield this.navigateAwayFromLogin()})}showLoginFailedAlert(){return Object(s.a)(this,void 0,void 0,function*(){const n=yield this.alertController.create({message:"Login failed",buttons:[{text:"Ok",role:"cancel"}]});yield n.present()})}navigateAwayFromLogin(){return Object(s.a)(this,void 0,void 0,function*(){yield this.router.navigate(["user-list"])})}}return n.\u0275fac=function(t){return new(t||n)(c.Kb(d),c.Kb(b.a),c.Kb(r.a),c.Kb(a.g))},n.\u0275cmp=c.Eb({type:n,selectors:[["app-login"]],decls:17,vars:2,consts:[["position","stacked"],["type","text",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],["expand","block",3,"click"]],template:function(n,t){1&n&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.hc(3,"Login"),c.Mb(),c.Mb(),c.Mb(),c.Nb(4,"ion-content"),c.Nb(5,"ion-card"),c.Nb(6,"ion-card-content"),c.Nb(7,"ion-item"),c.Nb(8,"ion-label",0),c.hc(9,"Phone number"),c.Mb(),c.Nb(10,"ion-input",1),c.Vb("ngModelChange",function(n){return t.phoneNumberModel=n}),c.Mb(),c.Mb(),c.Nb(11,"ion-item"),c.Nb(12,"ion-label",0),c.hc(13,"Password"),c.Mb(),c.Nb(14,"ion-input",2),c.Vb("ngModelChange",function(n){return t.passwordModel=n}),c.Mb(),c.Mb(),c.Nb(15,"ion-button",3),c.Vb("click",function(){return t.onLoginClick()}),c.hc(16,"Login"),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&n&&(c.Ab(10),c.ac("ngModel",t.phoneNumberModel),c.Ab(4),c.ac("ngModel",t.passwordModel))},directives:[r.l,r.D,r.B,r.j,r.f,r.g,r.p,r.q,r.o,r.J,o.d,o.e,r.e],styles:["ion-card[_ngcontent-%COMP%]{width:50%;margin-left:auto;margin-right:auto;margin-top:100px}"]}),n})()}];let h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.Ib({type:n}),n.\u0275inj=c.Hb({imports:[[a.j.forChild(u)],a.j]}),n})(),g=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.Ib({type:n}),n.\u0275inj=c.Hb({imports:[[i.b,o.a,r.E,h]]}),n})()}}]);