(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{s8hb:function(e,i,n){"use strict";n.r(i),n.d(i,"PublicSpaceCurationPageModule",function(){return m});var t=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),d=n("tyNb"),b=n("mrSG"),c=n("iOCt"),r=n("fXoL"),l=n("vglk"),s=n("pxUr");function g(e,i){1&e&&(r.Nb(0,"ion-content"),r.Lb(1,"ion-spinner",1),r.Mb())}function u(e,i){1&e&&r.Lb(0,"ion-spinner",1)}function h(e,i){1&e&&r.Lb(0,"ion-spinner",1)}function M(e,i){if(1&e){const e=r.Ob();r.Nb(0,"ion-content"),r.Nb(1,"agm-map",2),r.Nb(2,"agm-marker",3),r.Vb("dragEnd",function(i){return r.dc(e),r.Xb().onMarkerDragEnd(i)}),r.Mb(),r.Mb(),r.Nb(3,"h1"),r.hc(4,"Parking space details"),r.Mb(),r.Nb(5,"ion-grid"),r.Nb(6,"ion-row"),r.Nb(7,"ion-col"),r.Nb(8,"ion-item"),r.Nb(9,"ion-label",4),r.hc(10,"Address"),r.Mb(),r.Nb(11,"ion-input",5),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().address=i}),r.Mb(),r.Mb(),r.Mb(),r.Nb(12,"ion-col"),r.Nb(13,"ion-item"),r.Nb(14,"ion-label",4),r.hc(15,"Number of parking spaces"),r.Mb(),r.Nb(16,"ion-input",6),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().count=i}),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(17,"ion-row"),r.Nb(18,"ion-col"),r.Nb(19,"ion-item"),r.Nb(20,"ion-label",4),r.hc(21,"Latitude"),r.Mb(),r.Nb(22,"ion-input",5),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().latitude=i}),r.Mb(),r.Mb(),r.Mb(),r.Nb(23,"ion-col"),r.Nb(24,"ion-item"),r.Nb(25,"ion-label",4),r.hc(26,"Longitude"),r.Mb(),r.Nb(27,"ion-input",5),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().longitude=i}),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(28,"ion-row"),r.Nb(29,"ion-col"),r.Nb(30,"ion-item"),r.Nb(31,"ion-label",4),r.hc(32,"Is active"),r.Mb(),r.Nb(33,"ion-toggle",7),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().isActive=i}),r.Mb(),r.Mb(),r.Mb(),r.Nb(34,"ion-col"),r.Nb(35,"ion-item"),r.Nb(36,"ion-label",4),r.hc(37,"Is deleted"),r.Mb(),r.Nb(38,"ion-toggle",7),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().isDeleted=i}),r.Mb(),r.Mb(),r.Mb(),r.Nb(39,"ion-col"),r.Nb(40,"ion-item"),r.Nb(41,"ion-label",4),r.hc(42,"Is curation needed"),r.Mb(),r.Nb(43,"ion-toggle",7),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().isCurationNeeded=i}),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(44,"ion-row"),r.Nb(45,"ion-col"),r.Nb(46,"ion-item"),r.Nb(47,"ion-label",4),r.hc(48,"Has fixed price"),r.Mb(),r.Nb(49,"ion-toggle",7),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().hasFixedPrice=i}),r.Mb(),r.Mb(),r.Mb(),r.Nb(50,"ion-col"),r.Nb(51,"ion-item"),r.Nb(52,"ion-label",4),r.hc(53,"Amount"),r.Mb(),r.Nb(54,"ion-input",8),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().fixedPricePerHourAmount=i}),r.Mb(),r.Mb(),r.Mb(),r.Nb(55,"ion-col"),r.Nb(56,"ion-item"),r.Nb(57,"ion-label",4),r.hc(58,"Currency"),r.Mb(),r.Nb(59,"ion-input",9),r.Vb("ngModelChange",function(i){return r.dc(e),r.Xb().fixedPricePerHourCurrency=i}),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(60,"ion-row"),r.Nb(61,"ion-col"),r.Nb(62,"h1"),r.hc(63,"Parking space image"),r.Mb(),r.Mb(),r.Mb(),r.Nb(64,"ion-row"),r.Nb(65,"ion-col"),r.Nb(66,"div",10),r.Nb(67,"agm-map",11),r.Lb(68,"agm-marker",12),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(69,"ion-grid"),r.Nb(70,"ion-row"),r.Nb(71,"ion-col",13),r.Nb(72,"ion-button",14),r.Vb("click",function(){return r.dc(e),r.Xb().onSaveButtonClick()}),r.hc(73," Save \xa0 "),r.gc(74,u,1,0,"ion-spinner",15),r.Mb(),r.Mb(),r.Nb(75,"ion-col",16),r.Nb(76,"ion-button",17),r.Vb("click",function(){return r.dc(e),r.Xb().onDeleteButtonClick()}),r.hc(77," Delete "),r.gc(78,h,1,0,"ion-spinner",15),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&e){const e=r.Xb();r.Ab(1),r.ac("latitude",e.latitude)("longitude",e.longitude)("zoom",17),r.Ab(1),r.ac("latitude",e.latitude)("longitude",e.longitude)("markerDraggable",!0),r.Ab(9),r.ac("ngModel",e.address),r.Ab(5),r.ac("ngModel",e.count),r.Ab(6),r.ac("ngModel",e.latitude),r.Ab(5),r.ac("ngModel",e.longitude),r.Ab(6),r.ac("ngModel",e.isActive),r.Ab(5),r.ac("ngModel",e.isDeleted),r.Ab(5),r.ac("ngModel",e.isCurationNeeded),r.Ab(6),r.ac("ngModel",e.hasFixedPrice),r.Ab(5),r.ac("ngModel",e.fixedPricePerHourAmount)("disabled",!e.hasFixedPrice),r.Ab(5),r.ac("ngModel",e.fixedPricePerHourCurrency)("disabled",!e.hasFixedPrice),r.Ab(8),r.ac("latitude",e.latitude)("longitude",e.longitude)("mapTypeId",e.imageMapType)("zoom",19)("mapDraggable",!1),r.Ab(1),r.ac("latitude",e.latitude)("longitude",e.longitude),r.Ab(6),r.ac("ngIf",e.saveButtonLoading),r.Ab(4),r.ac("ngIf",e.deleteButtonLoading)}}const p=[{path:"",component:(()=>{class e{constructor(e,i,n,t){this.route=e,this.location=i,this.loadingService=n,this.parkingSpaceApiClient=t,this.loading=!1,this.saveButtonLoading=!1,this.deleteButtonLoading=!1,this.imageMapType="satellite",this.showLoading=()=>{this.loading=!0},this.hideLoading=()=>{this.loading=!1},this.showSaveLoading=()=>{this.saveButtonLoading=!0},this.hideSaveLoading=()=>{this.saveButtonLoading=!1},this.showDeleteLoading=()=>{this.deleteButtonLoading=!0},this.hideDeleteLoading=()=>{this.deleteButtonLoading=!1}}ngOnInit(){this.parkingSpaceId=this.route.snapshot.paramMap.get("parkingSpaceId")}ionViewWillEnter(){return Object(b.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(b.a)(this,void 0,void 0,function*(){const e=yield this.parkingSpaceApiClient.getDetails(this.parkingSpaceId);this.address=e.address,this.latitude=e.coordinates.lat,this.longitude=e.coordinates.lng,this.isActive=e.isActive,this.isCurationNeeded=e.curation.status===c.b.PENDING,this.isDeleted=e.isDeleted,this.fixedPricePerHourAmount=e.fixedPricePerHour?e.fixedPricePerHour.amount:0,this.fixedPricePerHourCurrency=e.fixedPricePerHour?e.fixedPricePerHour.currency:"RON",this.hasFixedPrice=!!e.fixedPricePerHour,this.count=e.count}),this.showLoading,this.hideLoading)})}onMarkerDragEnd(e){this.latitude=e.latLng.lat(),this.longitude=e.latLng.lng()}onSaveButtonClick(){return Object(b.a)(this,void 0,void 0,function*(){let e=null;this.hasFixedPrice&&(e={amount:this.fixedPricePerHourAmount,currency:this.fixedPricePerHourCurrency});const i={address:this.address,count:this.count,isCurationNeeded:this.isCurationNeeded,isDeleted:this.isDeleted,isActive:this.isActive,coordinates:{lat:this.latitude,lng:this.longitude},fixedPricePerHour:e};yield this.loadingService.run(()=>Object(b.a)(this,void 0,void 0,function*(){yield this.parkingSpaceApiClient.updateDetails(this.parkingSpaceId,i)}),this.showSaveLoading,this.hideSaveLoading)})}onDeleteButtonClick(){return Object(b.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(b.a)(this,void 0,void 0,function*(){yield this.parkingSpaceApiClient.forceDelete(this.parkingSpaceId),this.location.back()}),this.showDeleteLoading,this.hideDeleteLoading)})}}return e.\u0275fac=function(i){return new(i||e)(r.Kb(d.a),r.Kb(t.f),r.Kb(l.a),r.Kb(c.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-public-space-curation"]],decls:6,vars:2,consts:[[4,"ngIf"],["name","crescent"],[3,"latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable","dragEnd"],["position","stacked"],["type","text",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["type","number",3,"ngModel","disabled","ngModelChange"],["type","text",3,"ngModel","disabled","ngModelChange"],[1,"image-map"],[3,"latitude","longitude","mapTypeId","zoom","mapDraggable"],[3,"latitude","longitude"],["size","10"],["expand","block",3,"click"],["name","crescent",4,"ngIf"],["size","2"],["expand","block","color","danger",3,"click"]],template:function(e,i){1&e&&(r.Nb(0,"ion-header"),r.Nb(1,"ion-toolbar"),r.Nb(2,"ion-title"),r.hc(3,"Curate public parking space"),r.Mb(),r.Mb(),r.Mb(),r.gc(4,g,2,0,"ion-content",0),r.gc(5,M,79,27,"ion-content",0)),2&e&&(r.Ab(4),r.ac("ngIf",i.loading),r.Ab(1),r.ac("ngIf",!i.loading))},directives:[a.l,a.E,a.C,t.i,a.j,a.z,s.b,s.c,a.k,a.w,a.i,a.p,a.q,a.o,a.K,o.d,o.e,a.H,a.D,a.b,a.e],styles:["agm-map[_ngcontent-%COMP%]{height:400px}.image-map[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:600px}.image-map[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{width:600px;height:600px}h1[_ngcontent-%COMP%]{padding-left:20px;font-size:1.3rem}ion-button[_ngcontent-%COMP%]{margin-bottom:100px}ion-spinner[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:30px;display:block}"]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({imports:[[d.j.forChild(p)],d.j]}),e})(),m=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({imports:[[t.b,o.a,a.F,N,s.a]]}),e})()}}]);