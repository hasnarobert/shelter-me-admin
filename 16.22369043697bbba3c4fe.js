(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{F4UR:function(t,n,e){"use strict";e.r(n),e.d(n,"LoginPageModule",function(){return g});var i=e("ofXK"),o=e("3Pt+"),r=e("TEn/"),a=e("tyNb"),s=e("mrSG"),c=e("fXoL"),l=e("xwiS");let d=(()=>{class t{constructor(t){this.baseClient=t}login(t){return Object(s.a)(this,void 0,void 0,function*(){return this.baseClient.doPost("/admin/login",!1,t)})}}return t.\u0275fac=function(n){return new(n||t)(c.Rb(l.a))},t.\u0275prov=c.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=e("ri4K");const h=[{path:"",component:(()=>{class t{constructor(t,n,e,i){this.loginApiClient=t,this.authenticationService=n,this.alertController=e,this.router=i}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){})}ionViewWillEnter(){return Object(s.a)(this,void 0,void 0,function*(){this.authenticationService.isAuthenticated()&&(yield this.navigateAwayFromLogin())})}onLoginClick(){return Object(s.a)(this,void 0,void 0,function*(){const t={phoneNumber:this.phoneNumberModel,password:this.passwordModel};let n=null;try{n=yield this.loginApiClient.login(t)}catch(i){return void(yield this.showLoginFailedAlert())}if(!n.success)return void(yield this.showLoginFailedAlert());const e=n.token;yield this.authenticationService.storeToken(e),yield this.navigateAwayFromLogin()})}showLoginFailedAlert(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({message:"Login failed",buttons:[{text:"Ok",role:"cancel"}]});yield t.present()})}navigateAwayFromLogin(){return Object(s.a)(this,void 0,void 0,function*(){yield this.router.navigate(["user"])})}}return t.\u0275fac=function(n){return new(n||t)(c.Kb(d),c.Kb(u.a),c.Kb(r.a),c.Kb(a.g))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-login"]],decls:17,vars:2,consts:[["position","stacked"],["type","text",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],["expand","block",3,"click"]],template:function(t,n){1&t&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.hc(3,"Login"),c.Mb(),c.Mb(),c.Mb(),c.Nb(4,"ion-content"),c.Nb(5,"ion-card"),c.Nb(6,"ion-card-content"),c.Nb(7,"ion-item"),c.Nb(8,"ion-label",0),c.hc(9,"Phone number"),c.Mb(),c.Nb(10,"ion-input",1),c.Vb("ngModelChange",function(t){return n.phoneNumberModel=t}),c.Mb(),c.Mb(),c.Nb(11,"ion-item"),c.Nb(12,"ion-label",0),c.hc(13,"Password"),c.Mb(),c.Nb(14,"ion-input",2),c.Vb("ngModelChange",function(t){return n.passwordModel=t}),c.Mb(),c.Mb(),c.Nb(15,"ion-button",3),c.Vb("click",function(){return n.onLoginClick()}),c.hc(16,"Login"),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&t&&(c.Ab(10),c.ac("ngModel",n.phoneNumberModel),c.Ab(4),c.ac("ngModel",n.passwordModel))},directives:[r.l,r.E,r.C,r.j,r.f,r.g,r.p,r.q,r.o,r.K,o.d,o.e,r.e],styles:["ion-card[_ngcontent-%COMP%]{width:50%;margin-left:auto;margin-right:auto;margin-top:100px}"]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({imports:[[a.j.forChild(h)],a.j]}),t})(),g=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({imports:[[i.b,o.a,r.F,b]]}),t})()},xwiS:function(t,n,e){"use strict";e.d(n,"a",function(){return s});var i=e("mrSG"),o=e("fXoL"),r=e("tk/3"),a=e("ri4K");let s=(()=>{class t{constructor(t,n){this.httpClient=t,this.authenticationService=n}doGet(n,e=!0){return Object(i.a)(this,void 0,void 0,function*(){const i={};return e&&this.insertAuthorizationHeader(i),yield this.httpClient.get(`${t.ENDPOINT}${n}`,{headers:i}).toPromise()})}doPost(n,e=!0,o={}){return Object(i.a)(this,void 0,void 0,function*(){const i={};return e&&this.insertAuthorizationHeader(i),yield this.httpClient.post(`${t.ENDPOINT}${n}`,o,{headers:i}).toPromise()})}insertAuthorizationHeader(t){const n=this.authenticationService.getToken();t.Authorization=`Bearer ${n}`}}return t.ENDPOINT="https://api.goshelter.me",t.\u0275fac=function(n){return new(n||t)(o.Rb(r.a),o.Rb(a.a))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);