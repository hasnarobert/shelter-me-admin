(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"0dUQ":function(n,t,i){"use strict";i.r(t),i.d(t,"OutstandingBalancesPageModule",function(){return O});var o=i("ofXK"),e=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),r=i("mrSG"),s=i("fXoL"),l=i("xwiS");let d=(()=>{class n{constructor(n){this.baseClient=n}getAllOutstandingBalances(){return Object(r.a)(this,void 0,void 0,function*(){return this.baseClient.doGet("/admin/payout/outstanding-balances/list")})}payAllOutstandingBalances(){return Object(r.a)(this,void 0,void 0,function*(){return this.baseClient.doPost("/admin/payout/outstanding-balances/pay-all")})}}return n.\u0275fac=function(t){return new(t||n)(s.Rb(l.a))},n.\u0275prov=s.Gb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=i("vglk");function b(n,t){1&n&&(s.Nb(0,"ion-content"),s.Lb(1,"ion-spinner",1),s.Mb())}function h(n,t){1&n&&s.Lb(0,"ion-spinner",1)}function g(n,t){if(1&n&&(s.Nb(0,"ion-col"),s.hc(1),s.Mb()),2&n){const n=s.Xb().$implicit;s.Ab(1),s.ic(n.iban)}}function f(n,t){1&n&&(s.Nb(0,"ion-col",6),s.hc(1,"IBAN missing. Will not be paid."),s.Mb())}function p(n,t){if(1&n&&(s.Nb(0,"ion-item"),s.Nb(1,"ion-grid"),s.Nb(2,"ion-row"),s.Nb(3,"ion-col"),s.hc(4),s.Mb(),s.Nb(5,"ion-col"),s.hc(6),s.Mb(),s.gc(7,g,2,1,"ion-col",0),s.gc(8,f,2,0,"ion-col",5),s.Mb(),s.Mb(),s.Mb()),2&n){const n=t.$implicit;s.Ab(4),s.ic(n.userName),s.Ab(2),s.kc("",n.paymentValue.amount," ",n.paymentValue.currency,""),s.Ab(1),s.ac("ngIf",n.iban),s.Ab(1),s.ac("ngIf",!n.iban)}}function y(n,t){if(1&n){const n=s.Ob();s.Nb(0,"ion-content"),s.Nb(1,"ion-card"),s.Nb(2,"ion-card-header"),s.hc(3," Total outstanding balances "),s.Mb(),s.Nb(4,"ion-card-content"),s.Nb(5,"div"),s.hc(6),s.Mb(),s.Nb(7,"ion-button",2),s.Vb("click",function(){return s.dc(n),s.Xb().onPayOutstandingBalancesButtonClick()}),s.hc(8," Pay all outstanding balances "),s.gc(9,h,1,0,"ion-spinner",3),s.Mb(),s.Mb(),s.Mb(),s.Nb(10,"ion-list"),s.Nb(11,"ion-list-header"),s.hc(12,"Individual outstanding balances"),s.Mb(),s.gc(13,p,9,5,"ion-item",4),s.Mb(),s.Mb()}if(2&n){const n=s.Xb();s.Ab(6),s.kc(" ",n.totalAmount," ",n.totalCurrency," "),s.Ab(3),s.ac("ngIf",n.payButtonLoading),s.Ab(4),s.ac("ngForOf",n.items)}}const v=[{path:"",component:(()=>{class n{constructor(n,t){this.payoutApiClient=n,this.loadingService=t,this.items=[],this.showLoading=()=>{this.loading=!0},this.hideLoading=()=>{this.loading=!1},this.showPayLoading=()=>{this.payButtonLoading=!0},this.hidePayLoading=()=>{this.payButtonLoading=!1}}ngOnInit(){}ionViewWillEnter(){return Object(r.a)(this,void 0,void 0,function*(){yield this.reloadData()})}onPayOutstandingBalancesButtonClick(){return Object(r.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(r.a)(this,void 0,void 0,function*(){yield this.payoutApiClient.payAllOutstandingBalances(),yield this.reloadData()}),this.showPayLoading,this.hidePayLoading)})}reloadData(){return Object(r.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(r.a)(this,void 0,void 0,function*(){const n=yield this.payoutApiClient.getAllOutstandingBalances();this.totalAmount=n.total.amount,this.totalCurrency=n.total.currency,this.items=n.balances}),this.showLoading,this.hideLoading)})}}return n.\u0275fac=function(t){return new(t||n)(s.Kb(d),s.Kb(u.a))},n.\u0275cmp=s.Eb({type:n,selectors:[["app-payout"]],decls:6,vars:2,consts:[[4,"ngIf"],["name","crescent"],["expand","block",3,"click"],["name","crescent",4,"ngIf"],[4,"ngFor","ngForOf"],["class","missing-iban",4,"ngIf"],[1,"missing-iban"]],template:function(n,t){1&n&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-title"),s.hc(3,"Outstanding balances"),s.Mb(),s.Mb(),s.Mb(),s.gc(4,b,2,0,"ion-content",0),s.gc(5,y,14,4,"ion-content",0)),2&n&&(s.Ab(4),s.ac("ngIf",t.loading),s.Ab(1),s.ac("ngIf",!t.loading))},directives:[a.l,a.E,a.C,o.i,a.j,a.z,a.f,a.h,a.g,a.e,a.r,a.s,o.h,a.p,a.k,a.w,a.i],styles:["ion-spinner[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:30px;display:block}ion-card[_ngcontent-%COMP%]{text-align:center}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{font-size:2rem}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{color:#000;font-size:3rem}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-left:20px;margin-right:0;position:relative;top:-15px}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:1.5rem}ion-list[_ngcontent-%COMP%]   .missing-iban[_ngcontent-%COMP%]{color:red}"]}),n})()}];let m=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.Ib({type:n}),n.\u0275inj=s.Hb({imports:[[c.j.forChild(v)],c.j]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.Ib({type:n}),n.\u0275inj=s.Hb({imports:[[o.b,e.a,a.F,m]]}),n})()},vglk:function(n,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("mrSG"),e=i("fXoL"),a=i("TEn/");let c=(()=>{class n{constructor(n){this.toastController=n}handle(n){return Object(o.a)(this,void 0,void 0,function*(){const t=yield this.toastController.create({header:"Error",message:"Something did not work as expected. Try later",position:"bottom",color:"danger",buttons:[{text:"Close",role:"cancel"}]});yield t.present(),console.log(`BOOM: ${JSON.stringify(n)}`)})}}return n.\u0275fac=function(t){return new(t||n)(e.Rb(a.L))},n.\u0275prov=e.Gb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),r=(()=>{class n{constructor(n){this.errorHandlingService=n}run(n,t,i){return Object(o.a)(this,void 0,void 0,function*(){t();try{yield n()}catch(o){yield this.errorHandlingService.handle(o)}finally{i()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Rb(c))},n.\u0275prov=e.Gb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},xwiS:function(n,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("mrSG"),e=i("fXoL"),a=i("tk/3"),c=i("ri4K");let r=(()=>{class n{constructor(n,t){this.httpClient=n,this.authenticationService=t}doGet(t,i=!0){return Object(o.a)(this,void 0,void 0,function*(){const o={};return i&&this.insertAuthorizationHeader(o),yield this.httpClient.get(`${n.ENDPOINT}${t}`,{headers:o}).toPromise()})}doPost(t,i=!0,e={}){return Object(o.a)(this,void 0,void 0,function*(){const o={};return i&&this.insertAuthorizationHeader(o),yield this.httpClient.post(`${n.ENDPOINT}${t}`,e,{headers:o}).toPromise()})}insertAuthorizationHeader(n){const t=this.authenticationService.getToken();n.Authorization=`Bearer ${t}`}}return n.ENDPOINT="https://api.goshelter.me",n.\u0275fac=function(t){return new(t||n)(e.Rb(a.a),e.Rb(c.a))},n.\u0275prov=e.Gb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);