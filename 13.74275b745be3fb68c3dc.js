(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{NNol:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i("mrSG"),o=i("fXoL"),r=i("TEn/");let a=(()=>{class e{constructor(e){this.toastController=e}error(e){return Object(n.a)(this,void 0,void 0,function*(){const t=yield this.toastController.create({header:"Error",message:"Something did not work as expected. Try later!",position:"bottom",color:"danger",duration:4e3,buttons:[{text:"Close",role:"cancel"}]});yield t.present(),console.log(`Generic error handler caught: ${JSON.stringify(e,null,4)}`)})}success(e){return Object(n.a)(this,void 0,void 0,function*(){const t=yield this.toastController.create({header:"Success",message:null!=e?e:"Success!",position:"bottom",color:"success",duration:4e3,buttons:[{text:"Close",role:"cancel"}]});yield t.present()})}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(r.L))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},s8hb:function(e,t,i){"use strict";i.r(t),i.d(t,"PublicSpaceCurationPageModule",function(){return N});var n=i("ofXK"),o=i("3Pt+"),r=i("TEn/"),a=i("tyNb"),c=i("mrSG"),d=i("iOCt"),s=i("fXoL"),b=i("vglk"),l=i("pxUr");function u(e,t){1&e&&(s.Nb(0,"ion-content"),s.Lb(1,"ion-spinner",1),s.Mb())}function g(e,t){1&e&&s.Lb(0,"ion-spinner",1)}function h(e,t){1&e&&s.Lb(0,"ion-spinner",1)}function p(e,t){if(1&e){const e=s.Ob();s.Nb(0,"ion-content"),s.Nb(1,"agm-map",2),s.Nb(2,"agm-marker",3),s.Vb("dragEnd",function(t){return s.dc(e),s.Xb().onMarkerDragEnd(t)}),s.Mb(),s.Mb(),s.Nb(3,"h1"),s.hc(4,"Parking space details"),s.Mb(),s.Nb(5,"ion-grid"),s.Nb(6,"ion-row"),s.Nb(7,"ion-col"),s.Nb(8,"ion-item"),s.Nb(9,"ion-label",4),s.hc(10,"Address"),s.Mb(),s.Nb(11,"ion-input",5),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().address=t}),s.Mb(),s.Mb(),s.Mb(),s.Nb(12,"ion-col"),s.Nb(13,"ion-item"),s.Nb(14,"ion-label",4),s.hc(15,"Number of parking spaces"),s.Mb(),s.Nb(16,"ion-input",6),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().count=t}),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(17,"ion-row"),s.Nb(18,"ion-col"),s.Nb(19,"ion-item"),s.Nb(20,"ion-label",4),s.hc(21,"Latitude"),s.Mb(),s.Nb(22,"ion-input",5),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().latitude=t}),s.Mb(),s.Mb(),s.Mb(),s.Nb(23,"ion-col"),s.Nb(24,"ion-item"),s.Nb(25,"ion-label",4),s.hc(26,"Longitude"),s.Mb(),s.Nb(27,"ion-input",5),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().longitude=t}),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(28,"ion-row"),s.Nb(29,"ion-col"),s.Nb(30,"ion-item"),s.Nb(31,"ion-label",4),s.hc(32,"Is active"),s.Mb(),s.Nb(33,"ion-toggle",7),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().isActive=t}),s.Mb(),s.Mb(),s.Mb(),s.Nb(34,"ion-col"),s.Nb(35,"ion-item"),s.Nb(36,"ion-label",4),s.hc(37,"Is deleted"),s.Mb(),s.Nb(38,"ion-toggle",7),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().isDeleted=t}),s.Mb(),s.Mb(),s.Mb(),s.Nb(39,"ion-col"),s.Nb(40,"ion-item"),s.Nb(41,"ion-label",4),s.hc(42,"Is curation needed"),s.Mb(),s.Nb(43,"ion-toggle",7),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().isCurationNeeded=t}),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(44,"ion-row"),s.Nb(45,"ion-col"),s.Nb(46,"ion-item"),s.Nb(47,"ion-label",4),s.hc(48,"Has fixed price"),s.Mb(),s.Nb(49,"ion-toggle",7),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().hasFixedPrice=t}),s.Mb(),s.Mb(),s.Mb(),s.Nb(50,"ion-col"),s.Nb(51,"ion-item"),s.Nb(52,"ion-label",4),s.hc(53,"Amount"),s.Mb(),s.Nb(54,"ion-input",8),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().fixedPricePerHourAmount=t}),s.Mb(),s.Mb(),s.Mb(),s.Nb(55,"ion-col"),s.Nb(56,"ion-item"),s.Nb(57,"ion-label",4),s.hc(58,"Currency"),s.Mb(),s.Nb(59,"ion-input",9),s.Vb("ngModelChange",function(t){return s.dc(e),s.Xb().fixedPricePerHourCurrency=t}),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(60,"ion-row"),s.Nb(61,"ion-col"),s.Nb(62,"h1"),s.hc(63,"Parking space image"),s.Mb(),s.Mb(),s.Mb(),s.Nb(64,"ion-row"),s.Nb(65,"ion-col"),s.Nb(66,"div",10),s.Nb(67,"agm-map",11),s.Lb(68,"agm-marker",12),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(69,"ion-grid"),s.Nb(70,"ion-row"),s.Nb(71,"ion-col",13),s.Nb(72,"ion-button",14),s.Vb("click",function(){return s.dc(e),s.Xb().onSaveButtonClick()}),s.hc(73," Save \xa0 "),s.gc(74,g,1,0,"ion-spinner",15),s.Mb(),s.Mb(),s.Nb(75,"ion-col",16),s.Nb(76,"ion-button",17),s.Vb("click",function(){return s.dc(e),s.Xb().onDeleteButtonClick()}),s.hc(77," Delete "),s.gc(78,h,1,0,"ion-spinner",15),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&e){const e=s.Xb();s.Ab(1),s.ac("latitude",e.latitude)("longitude",e.longitude)("zoom",17),s.Ab(1),s.ac("latitude",e.latitude)("longitude",e.longitude)("markerDraggable",!0),s.Ab(9),s.ac("ngModel",e.address),s.Ab(5),s.ac("ngModel",e.count),s.Ab(6),s.ac("ngModel",e.latitude),s.Ab(5),s.ac("ngModel",e.longitude),s.Ab(6),s.ac("ngModel",e.isActive),s.Ab(5),s.ac("ngModel",e.isDeleted),s.Ab(5),s.ac("ngModel",e.isCurationNeeded),s.Ab(6),s.ac("ngModel",e.hasFixedPrice),s.Ab(5),s.ac("ngModel",e.fixedPricePerHourAmount)("disabled",!e.hasFixedPrice),s.Ab(5),s.ac("ngModel",e.fixedPricePerHourCurrency)("disabled",!e.hasFixedPrice),s.Ab(8),s.ac("latitude",e.latitude)("longitude",e.longitude)("mapTypeId",e.imageMapType)("zoom",19)("mapDraggable",!1),s.Ab(1),s.ac("latitude",e.latitude)("longitude",e.longitude),s.Ab(6),s.ac("ngIf",e.saveButtonLoading),s.Ab(4),s.ac("ngIf",e.deleteButtonLoading)}}const M=[{path:"",component:(()=>{class e{constructor(e,t,i,n){this.route=e,this.location=t,this.loadingService=i,this.parkingSpaceApiClient=n,this.loading=!1,this.saveButtonLoading=!1,this.deleteButtonLoading=!1,this.imageMapType="satellite",this.showLoading=()=>{this.loading=!0},this.hideLoading=()=>{this.loading=!1},this.showSaveLoading=()=>{this.saveButtonLoading=!0},this.hideSaveLoading=()=>{this.saveButtonLoading=!1},this.showDeleteLoading=()=>{this.deleteButtonLoading=!0},this.hideDeleteLoading=()=>{this.deleteButtonLoading=!1}}ngOnInit(){this.parkingSpaceId=this.route.snapshot.paramMap.get("parkingSpaceId")}ionViewWillEnter(){return Object(c.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(c.a)(this,void 0,void 0,function*(){const e=yield this.parkingSpaceApiClient.getDetails(this.parkingSpaceId);this.address=e.address,this.latitude=e.coordinates.lat,this.longitude=e.coordinates.lng,this.isActive=e.isActive,this.isCurationNeeded=e.curation.status===d.b.PENDING,this.isDeleted=e.isDeleted,this.fixedPricePerHourAmount=e.fixedPricePerHour?e.fixedPricePerHour.amount:0,this.fixedPricePerHourCurrency=e.fixedPricePerHour?e.fixedPricePerHour.currency:"RON",this.hasFixedPrice=!!e.fixedPricePerHour,this.count=e.count}),this.showLoading,this.hideLoading)})}onMarkerDragEnd(e){this.latitude=e.latLng.lat(),this.longitude=e.latLng.lng()}onSaveButtonClick(){return Object(c.a)(this,void 0,void 0,function*(){let e=null;this.hasFixedPrice&&(e={amount:this.fixedPricePerHourAmount,currency:this.fixedPricePerHourCurrency});const t={address:this.address,count:this.count,isCurationNeeded:this.isCurationNeeded,isDeleted:this.isDeleted,isActive:this.isActive,coordinates:{lat:this.latitude,lng:this.longitude},fixedPricePerHour:e};yield this.loadingService.run(()=>Object(c.a)(this,void 0,void 0,function*(){yield this.parkingSpaceApiClient.updateDetails(this.parkingSpaceId,t)}),this.showSaveLoading,this.hideSaveLoading)})}onDeleteButtonClick(){return Object(c.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(c.a)(this,void 0,void 0,function*(){yield this.parkingSpaceApiClient.forceDelete(this.parkingSpaceId),this.location.back()}),this.showDeleteLoading,this.hideDeleteLoading)})}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(a.a),s.Kb(n.f),s.Kb(b.a),s.Kb(d.a))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-public-space-curation"]],decls:6,vars:2,consts:[[4,"ngIf"],["name","crescent"],[3,"latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable","dragEnd"],["position","stacked"],["type","text",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["type","number",3,"ngModel","disabled","ngModelChange"],["type","text",3,"ngModel","disabled","ngModelChange"],[1,"image-map"],[3,"latitude","longitude","mapTypeId","zoom","mapDraggable"],[3,"latitude","longitude"],["size","10"],["expand","block",3,"click"],["name","crescent",4,"ngIf"],["size","2"],["expand","block","color","danger",3,"click"]],template:function(e,t){1&e&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-title"),s.hc(3,"Curate public parking space"),s.Mb(),s.Mb(),s.Mb(),s.gc(4,u,2,0,"ion-content",0),s.gc(5,p,79,27,"ion-content",0)),2&e&&(s.Ab(4),s.ac("ngIf",t.loading),s.Ab(1),s.ac("ngIf",!t.loading))},directives:[r.l,r.E,r.C,n.i,r.j,r.z,l.b,l.c,r.k,r.w,r.i,r.p,r.q,r.o,r.K,o.d,o.e,r.H,r.D,r.b,r.e],styles:["agm-map[_ngcontent-%COMP%]{height:400px}.image-map[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:600px}.image-map[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{width:600px;height:600px}h1[_ngcontent-%COMP%]{padding-left:20px;font-size:1.3rem}ion-button[_ngcontent-%COMP%]{margin-bottom:100px}ion-spinner[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:30px;display:block}"]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({imports:[[a.j.forChild(M)],a.j]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({imports:[[n.b,o.a,r.F,f,l.a]]}),e})()},vglk:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i("mrSG"),o=i("fXoL"),r=i("NNol");let a=(()=>{class e{constructor(e){this.jobResultToastService=e}run(e,t,i){return Object(n.a)(this,void 0,void 0,function*(){t();try{yield e()}catch(n){yield this.jobResultToastService.error(n)}finally{i()}})}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(r.a))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},xwiS:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var n=i("mrSG"),o=i("fXoL"),r=i("tk/3"),a=i("ri4K");let c=(()=>{class e{constructor(e,t){this.httpClient=e,this.authenticationService=t}doGet(t,i=!0){return Object(n.a)(this,void 0,void 0,function*(){const n={};return i&&this.insertAuthorizationHeader(n),yield this.httpClient.get(`${e.ENDPOINT}${t}`,{headers:n}).toPromise()})}doPost(t,i=!0,o={}){return Object(n.a)(this,void 0,void 0,function*(){const n={};return i&&this.insertAuthorizationHeader(n),yield this.httpClient.post(`${e.ENDPOINT}${t}`,o,{headers:n}).toPromise()})}insertAuthorizationHeader(e){const t=this.authenticationService.getToken();e.Authorization=`Bearer ${t}`}}return e.ENDPOINT="https://api.goshelter.me",e.\u0275fac=function(t){return new(t||e)(o.Rb(r.a),o.Rb(a.a))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);