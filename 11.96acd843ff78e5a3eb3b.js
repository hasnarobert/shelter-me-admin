(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"0dUQ":function(n,t,i){"use strict";i.r(t),i.d(t,"OutstandingBalancesPageModule",function(){return O});var o=i("ofXK"),a=i("3Pt+"),e=i("TEn/"),c=i("tyNb"),s=i("mrSG"),r=i("fXoL"),l=i("xwiS");let d=(()=>{class n{constructor(n){this.baseClient=n}getAllOutstandingBalances(){return Object(s.a)(this,void 0,void 0,function*(){return this.baseClient.doGet("/admin/payout/outstanding-balances/list")})}payAllOutstandingBalances(){return Object(s.a)(this,void 0,void 0,function*(){return this.baseClient.doPost("/admin/payout/outstanding-balances/pay-all")})}}return n.\u0275fac=function(t){return new(t||n)(r.Rb(l.a))},n.\u0275prov=r.Gb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=i("vglk");function u(n,t){1&n&&(r.Nb(0,"ion-content"),r.Lb(1,"ion-spinner",1),r.Mb())}function g(n,t){1&n&&r.Lb(0,"ion-spinner",1)}function h(n,t){if(1&n&&(r.Nb(0,"ion-col"),r.hc(1),r.Mb()),2&n){const n=r.Xb().$implicit;r.Ab(1),r.ic(n.iban)}}function p(n,t){1&n&&(r.Nb(0,"ion-col",6),r.hc(1,"IBAN missing. Will not be paid."),r.Mb())}function f(n,t){if(1&n&&(r.Nb(0,"ion-item"),r.Nb(1,"ion-grid"),r.Nb(2,"ion-row"),r.Nb(3,"ion-col"),r.hc(4),r.Mb(),r.Nb(5,"ion-col"),r.hc(6),r.Mb(),r.gc(7,h,2,1,"ion-col",0),r.gc(8,p,2,0,"ion-col",5),r.Mb(),r.Mb(),r.Mb()),2&n){const n=t.$implicit;r.Ab(4),r.ic(n.userName),r.Ab(2),r.kc("",n.paymentValue.amount," ",n.paymentValue.currency,""),r.Ab(1),r.ac("ngIf",n.iban),r.Ab(1),r.ac("ngIf",!n.iban)}}function m(n,t){if(1&n){const n=r.Ob();r.Nb(0,"ion-content"),r.Nb(1,"ion-card"),r.Nb(2,"ion-card-header"),r.hc(3," Total outstanding balances "),r.Mb(),r.Nb(4,"ion-card-content"),r.Nb(5,"div"),r.hc(6),r.Mb(),r.Nb(7,"ion-button",2),r.Vb("click",function(){return r.dc(n),r.Xb().onPayOutstandingBalancesButtonClick()}),r.hc(8," Pay all outstanding balances "),r.gc(9,g,1,0,"ion-spinner",3),r.Mb(),r.Mb(),r.Mb(),r.Nb(10,"ion-list"),r.Nb(11,"ion-list-header"),r.hc(12,"Individual outstanding balances"),r.Mb(),r.gc(13,f,9,5,"ion-item",4),r.Mb(),r.Mb()}if(2&n){const n=r.Xb();r.Ab(6),r.kc(" ",n.totalAmount," ",n.totalCurrency," "),r.Ab(3),r.ac("ngIf",n.payButtonLoading),r.Ab(4),r.ac("ngForOf",n.items)}}const y=[{path:"",component:(()=>{class n{constructor(n,t){this.payoutApiClient=n,this.loadingService=t,this.items=[],this.showLoading=()=>{this.loading=!0},this.hideLoading=()=>{this.loading=!1},this.showPayLoading=()=>{this.payButtonLoading=!0},this.hidePayLoading=()=>{this.payButtonLoading=!1}}ngOnInit(){}ionViewWillEnter(){return Object(s.a)(this,void 0,void 0,function*(){yield this.reloadData()})}onPayOutstandingBalancesButtonClick(){return Object(s.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(s.a)(this,void 0,void 0,function*(){yield this.payoutApiClient.payAllOutstandingBalances(),yield this.reloadData()}),this.showPayLoading,this.hidePayLoading)})}reloadData(){return Object(s.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(s.a)(this,void 0,void 0,function*(){const n=yield this.payoutApiClient.getAllOutstandingBalances();this.totalAmount=n.total.amount,this.totalCurrency=n.total.currency,this.items=n.balances}),this.showLoading,this.hideLoading)})}}return n.\u0275fac=function(t){return new(t||n)(r.Kb(d),r.Kb(b.a))},n.\u0275cmp=r.Eb({type:n,selectors:[["app-payout"]],decls:6,vars:2,consts:[[4,"ngIf"],["name","crescent"],["expand","block",3,"click"],["name","crescent",4,"ngIf"],[4,"ngFor","ngForOf"],["class","missing-iban",4,"ngIf"],[1,"missing-iban"]],template:function(n,t){1&n&&(r.Nb(0,"ion-header"),r.Nb(1,"ion-toolbar"),r.Nb(2,"ion-title"),r.hc(3,"Outstanding balances"),r.Mb(),r.Mb(),r.Mb(),r.gc(4,u,2,0,"ion-content",0),r.gc(5,m,14,4,"ion-content",0)),2&n&&(r.Ab(4),r.ac("ngIf",t.loading),r.Ab(1),r.ac("ngIf",!t.loading))},directives:[e.l,e.E,e.C,o.i,e.j,e.z,e.f,e.h,e.g,e.e,e.r,e.s,o.h,e.p,e.k,e.w,e.i],styles:["ion-spinner[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:30px;display:block}ion-card[_ngcontent-%COMP%]{text-align:center}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{font-size:2rem}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{color:#000;font-size:3rem}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-left:20px;margin-right:0;position:relative;top:-15px}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:1.5rem}ion-list[_ngcontent-%COMP%]   .missing-iban[_ngcontent-%COMP%]{color:red}"]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=r.Ib({type:n}),n.\u0275inj=r.Hb({imports:[[c.j.forChild(y)],c.j]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=r.Ib({type:n}),n.\u0275inj=r.Hb({imports:[[o.b,a.a,e.F,M]]}),n})()}}]);