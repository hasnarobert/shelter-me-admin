(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{s8hb:function(e,i,t){"use strict";t.r(i),t.d(i,"PublicSpaceCurationPageModule",function(){return N});var n=t("ofXK"),o=t("3Pt+"),a=t("TEn/"),r=t("tyNb"),c=t("mrSG"),d=t("iOCt"),b=t("fXoL"),s=t("vglk"),l=t("pxUr");function u(e,i){1&e&&(b.Nb(0,"ion-content"),b.Lb(1,"ion-spinner",1),b.Mb())}function g(e,i){1&e&&b.Lb(0,"ion-spinner",1)}function h(e,i){1&e&&b.Lb(0,"ion-spinner",1)}function p(e,i){if(1&e){const e=b.Ob();b.Nb(0,"ion-content"),b.Nb(1,"agm-map",2),b.Nb(2,"agm-marker",3),b.Vb("dragEnd",function(i){return b.dc(e),b.Xb().onMarkerDragEnd(i)}),b.Mb(),b.Mb(),b.Nb(3,"h1"),b.hc(4,"Parking space details"),b.Mb(),b.Nb(5,"ion-grid"),b.Nb(6,"ion-row"),b.Nb(7,"ion-col"),b.Nb(8,"ion-item"),b.Nb(9,"ion-label",4),b.hc(10,"Address"),b.Mb(),b.Nb(11,"ion-input",5),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().address=i}),b.Mb(),b.Mb(),b.Mb(),b.Nb(12,"ion-col"),b.Nb(13,"ion-item"),b.Nb(14,"ion-label",4),b.hc(15,"Number of parking spaces"),b.Mb(),b.Nb(16,"ion-input",6),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().count=i}),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(17,"ion-row"),b.Nb(18,"ion-col"),b.Nb(19,"ion-item"),b.Nb(20,"ion-label",4),b.hc(21,"Latitude"),b.Mb(),b.Nb(22,"ion-input",5),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().latitude=i}),b.Mb(),b.Mb(),b.Mb(),b.Nb(23,"ion-col"),b.Nb(24,"ion-item"),b.Nb(25,"ion-label",4),b.hc(26,"Longitude"),b.Mb(),b.Nb(27,"ion-input",5),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().longitude=i}),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(28,"ion-row"),b.Nb(29,"ion-col"),b.Nb(30,"ion-item"),b.Nb(31,"ion-label",4),b.hc(32,"Is active"),b.Mb(),b.Nb(33,"ion-toggle",7),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().isActive=i}),b.Mb(),b.Mb(),b.Mb(),b.Nb(34,"ion-col"),b.Nb(35,"ion-item"),b.Nb(36,"ion-label",4),b.hc(37,"Is deleted"),b.Mb(),b.Nb(38,"ion-toggle",7),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().isDeleted=i}),b.Mb(),b.Mb(),b.Mb(),b.Nb(39,"ion-col"),b.Nb(40,"ion-item"),b.Nb(41,"ion-label",4),b.hc(42,"Is curation needed"),b.Mb(),b.Nb(43,"ion-toggle",7),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().isCurationNeeded=i}),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(44,"ion-row"),b.Nb(45,"ion-col"),b.Nb(46,"ion-item"),b.Nb(47,"ion-label",4),b.hc(48,"Has fixed price"),b.Mb(),b.Nb(49,"ion-toggle",7),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().hasFixedPrice=i}),b.Mb(),b.Mb(),b.Mb(),b.Nb(50,"ion-col"),b.Nb(51,"ion-item"),b.Nb(52,"ion-label",4),b.hc(53,"Amount"),b.Mb(),b.Nb(54,"ion-input",8),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().fixedPricePerHourAmount=i}),b.Mb(),b.Mb(),b.Mb(),b.Nb(55,"ion-col"),b.Nb(56,"ion-item"),b.Nb(57,"ion-label",4),b.hc(58,"Currency"),b.Mb(),b.Nb(59,"ion-input",9),b.Vb("ngModelChange",function(i){return b.dc(e),b.Xb().fixedPricePerHourCurrency=i}),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(60,"ion-row"),b.Nb(61,"ion-col"),b.Nb(62,"h1"),b.hc(63,"Parking space image"),b.Mb(),b.Mb(),b.Mb(),b.Nb(64,"ion-row"),b.Nb(65,"ion-col"),b.Nb(66,"div",10),b.Nb(67,"agm-map",11),b.Lb(68,"agm-marker",12),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(69,"ion-grid"),b.Nb(70,"ion-row"),b.Nb(71,"ion-col",13),b.Nb(72,"ion-button",14),b.Vb("click",function(){return b.dc(e),b.Xb().onSaveButtonClick()}),b.hc(73," Save \xa0 "),b.gc(74,g,1,0,"ion-spinner",15),b.Mb(),b.Mb(),b.Nb(75,"ion-col",16),b.Nb(76,"ion-button",17),b.Vb("click",function(){return b.dc(e),b.Xb().onDeleteButtonClick()}),b.hc(77," Delete "),b.gc(78,h,1,0,"ion-spinner",15),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb()}if(2&e){const e=b.Xb();b.Ab(1),b.ac("latitude",e.latitude)("longitude",e.longitude)("zoom",17),b.Ab(1),b.ac("latitude",e.latitude)("longitude",e.longitude)("markerDraggable",!0),b.Ab(9),b.ac("ngModel",e.address),b.Ab(5),b.ac("ngModel",e.count),b.Ab(6),b.ac("ngModel",e.latitude),b.Ab(5),b.ac("ngModel",e.longitude),b.Ab(6),b.ac("ngModel",e.isActive),b.Ab(5),b.ac("ngModel",e.isDeleted),b.Ab(5),b.ac("ngModel",e.isCurationNeeded),b.Ab(6),b.ac("ngModel",e.hasFixedPrice),b.Ab(5),b.ac("ngModel",e.fixedPricePerHourAmount)("disabled",!e.hasFixedPrice),b.Ab(5),b.ac("ngModel",e.fixedPricePerHourCurrency)("disabled",!e.hasFixedPrice),b.Ab(8),b.ac("latitude",e.latitude)("longitude",e.longitude)("mapTypeId",e.imageMapType)("zoom",19)("mapDraggable",!1),b.Ab(1),b.ac("latitude",e.latitude)("longitude",e.longitude),b.Ab(6),b.ac("ngIf",e.saveButtonLoading),b.Ab(4),b.ac("ngIf",e.deleteButtonLoading)}}const M=[{path:"",component:(()=>{class e{constructor(e,i,t,n){this.route=e,this.location=i,this.loadingService=t,this.parkingSpaceApiClient=n,this.loading=!1,this.saveButtonLoading=!1,this.deleteButtonLoading=!1,this.imageMapType="satellite",this.showLoading=()=>{this.loading=!0},this.hideLoading=()=>{this.loading=!1},this.showSaveLoading=()=>{this.saveButtonLoading=!0},this.hideSaveLoading=()=>{this.saveButtonLoading=!1},this.showDeleteLoading=()=>{this.deleteButtonLoading=!0},this.hideDeleteLoading=()=>{this.deleteButtonLoading=!1}}ngOnInit(){this.parkingSpaceId=this.route.snapshot.paramMap.get("parkingSpaceId")}ionViewWillEnter(){return Object(c.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(c.a)(this,void 0,void 0,function*(){const e=yield this.parkingSpaceApiClient.getDetails(this.parkingSpaceId);this.address=e.address,this.latitude=e.coordinates.lat,this.longitude=e.coordinates.lng,this.isActive=e.isActive,this.isCurationNeeded=e.curation.status===d.b.PENDING,this.isDeleted=e.isDeleted,this.fixedPricePerHourAmount=e.fixedPricePerHour?e.fixedPricePerHour.amount:0,this.fixedPricePerHourCurrency=e.fixedPricePerHour?e.fixedPricePerHour.currency:"RON",this.hasFixedPrice=!!e.fixedPricePerHour,this.count=e.count}),this.showLoading,this.hideLoading)})}onMarkerDragEnd(e){this.latitude=e.latLng.lat(),this.longitude=e.latLng.lng()}onSaveButtonClick(){return Object(c.a)(this,void 0,void 0,function*(){let e=null;this.hasFixedPrice&&(e={amount:this.fixedPricePerHourAmount,currency:this.fixedPricePerHourCurrency});const i={address:this.address,count:this.count,isCurationNeeded:this.isCurationNeeded,isDeleted:this.isDeleted,isActive:this.isActive,coordinates:{lat:this.latitude,lng:this.longitude},fixedPricePerHour:e};yield this.loadingService.run(()=>Object(c.a)(this,void 0,void 0,function*(){yield this.parkingSpaceApiClient.updateDetails(this.parkingSpaceId,i)}),this.showSaveLoading,this.hideSaveLoading)})}onDeleteButtonClick(){return Object(c.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(c.a)(this,void 0,void 0,function*(){yield this.parkingSpaceApiClient.forceDelete(this.parkingSpaceId),this.location.back()}),this.showDeleteLoading,this.hideDeleteLoading)})}}return e.\u0275fac=function(i){return new(i||e)(b.Kb(r.a),b.Kb(n.f),b.Kb(s.a),b.Kb(d.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-public-space-curation"]],decls:6,vars:2,consts:[[4,"ngIf"],["name","crescent"],[3,"latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable","dragEnd"],["position","stacked"],["type","text",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["type","number",3,"ngModel","disabled","ngModelChange"],["type","text",3,"ngModel","disabled","ngModelChange"],[1,"image-map"],[3,"latitude","longitude","mapTypeId","zoom","mapDraggable"],[3,"latitude","longitude"],["size","10"],["expand","block",3,"click"],["name","crescent",4,"ngIf"],["size","2"],["expand","block","color","danger",3,"click"]],template:function(e,i){1&e&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-title"),b.hc(3,"Curate public parking space"),b.Mb(),b.Mb(),b.Mb(),b.gc(4,u,2,0,"ion-content",0),b.gc(5,p,79,27,"ion-content",0)),2&e&&(b.Ab(4),b.ac("ngIf",i.loading),b.Ab(1),b.ac("ngIf",!i.loading))},directives:[a.l,a.E,a.C,n.i,a.j,a.z,l.b,l.c,a.k,a.w,a.i,a.p,a.q,a.o,a.K,o.d,o.e,a.H,a.D,a.b,a.e],styles:["agm-map[_ngcontent-%COMP%]{height:400px}.image-map[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:600px}.image-map[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{width:600px;height:600px}h1[_ngcontent-%COMP%]{padding-left:20px;font-size:1.3rem}ion-button[_ngcontent-%COMP%]{margin-bottom:100px}ion-spinner[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:30px;display:block}"]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({imports:[[r.j.forChild(M)],r.j]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({imports:[[n.b,o.a,a.F,f,l.a]]}),e})()},vglk:function(e,i,t){"use strict";t.d(i,"a",function(){return c});var n=t("mrSG"),o=t("fXoL"),a=t("TEn/");let r=(()=>{class e{constructor(e){this.toastController=e}handle(e){return Object(n.a)(this,void 0,void 0,function*(){const i=yield this.toastController.create({header:"Error",message:"Something did not work as expected. Try later",position:"bottom",color:"danger",buttons:[{text:"Close",role:"cancel"}]});yield i.present(),console.log(`BOOM: ${JSON.stringify(e)}`)})}}return e.\u0275fac=function(i){return new(i||e)(o.Rb(a.L))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),c=(()=>{class e{constructor(e){this.errorHandlingService=e}run(e,i,t){return Object(n.a)(this,void 0,void 0,function*(){i();try{yield e()}catch(n){yield this.errorHandlingService.handle(n)}finally{t()}})}}return e.\u0275fac=function(i){return new(i||e)(o.Rb(r))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},xwiS:function(e,i,t){"use strict";t.d(i,"a",function(){return c});var n=t("mrSG"),o=t("fXoL"),a=t("tk/3"),r=t("ri4K");let c=(()=>{class e{constructor(e,i){this.httpClient=e,this.authenticationService=i}doGet(i,t=!0){return Object(n.a)(this,void 0,void 0,function*(){const n={};return t&&this.insertAuthorizationHeader(n),yield this.httpClient.get(`${e.ENDPOINT}${i}`,{headers:n}).toPromise()})}doPost(i,t=!0,o={}){return Object(n.a)(this,void 0,void 0,function*(){const n={};return t&&this.insertAuthorizationHeader(n),yield this.httpClient.post(`${e.ENDPOINT}${i}`,o,{headers:n}).toPromise()})}insertAuthorizationHeader(e){const i=this.authenticationService.getToken();e.Authorization=`Bearer ${i}`}}return e.ENDPOINT="https://api.goshelter.me",e.\u0275fac=function(i){return new(i||e)(o.Rb(a.a),o.Rb(r.a))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);