(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{YJoX:function(i,o,n){"use strict";n.r(o),n.d(o,"ParkingSpacePageModule",function(){return C});var t=n("ofXK"),e=n("3Pt+"),c=n("TEn/"),a=n("tyNb"),b=n("mrSG"),s=n("iOCt"),r=n("wd/R"),d=n("fXoL"),l=n("vglk"),u=n("pxUr");function h(i,o){1&i&&(d.Nb(0,"ion-content"),d.Lb(1,"ion-spinner",1),d.Mb())}function g(i,o){if(1&i){const i=d.Ob();d.Nb(0,"ion-row",7),d.Nb(1,"ion-col",8),d.hc(2,"Owner ID"),d.Mb(),d.Nb(3,"ion-col"),d.Nb(4,"a",15),d.Vb("click",function(){return d.dc(i),d.Xb(2).onOwnerClick()}),d.hc(5),d.Mb(),d.Mb(),d.Mb()}if(2&i){const i=d.Xb(2);d.Ab(5),d.ic(i.userId)}}function p(i,o){if(1&i&&(d.Nb(0,"ion-row",7),d.Nb(1,"ion-col",8),d.hc(2,"Schedule"),d.Mb(),d.Nb(3,"ion-col"),d.hc(4),d.Mb(),d.Mb()),2&i){const i=d.Xb(2);d.Ab(4),d.ic(i.displaySchedule)}}function M(i,o){if(1&i&&(d.Nb(0,"ion-row",7),d.Nb(1,"ion-col",8),d.hc(2,"Count"),d.Mb(),d.Nb(3,"ion-col"),d.hc(4),d.Mb(),d.Mb()),2&i){const i=d.Xb(2);d.Ab(4),d.ic(i.count)}}function m(i,o){if(1&i&&(d.Nb(0,"ion-row",7),d.Nb(1,"ion-col",8),d.hc(2,"Fixed price per hour"),d.Mb(),d.Nb(3,"ion-col"),d.hc(4),d.Mb(),d.Mb()),2&i){const i=d.Xb(2);d.Ab(4),d.kc("",i.fixedPricePerHour.amount," ",i.fixedPricePerHour.currency,"")}}function N(i,o){if(1&i&&(d.Nb(0,"ion-row",7),d.Nb(1,"ion-col",8),d.hc(2,"Description"),d.Mb(),d.Nb(3,"ion-col"),d.hc(4),d.Mb(),d.Mb()),2&i){const i=d.Xb(2);d.Ab(4),d.ic(i.description)}}function f(i,o){if(1&i&&(d.Nb(0,"ion-row",7),d.Nb(1,"ion-col",8),d.hc(2,"Number"),d.Mb(),d.Nb(3,"ion-col"),d.hc(4),d.Mb(),d.Mb()),2&i){const i=d.Xb(2);d.Ab(4),d.ic(i.number)}}function v(i,o){if(1&i&&(d.Nb(0,"ion-row"),d.Nb(1,"ion-col",8),d.hc(2,"Tags"),d.Mb(),d.Nb(3,"ion-col"),d.hc(4),d.Mb(),d.Mb()),2&i){const i=d.Xb(2);d.Ab(4),d.ic(i.displayTags)}}function A(i,o){1&i&&d.Lb(0,"ion-spinner",16)}function w(i,o){1&i&&d.Lb(0,"ion-spinner",16)}function y(i,o){if(1&i){const i=d.Ob();d.Nb(0,"ion-content"),d.Nb(1,"ion-grid"),d.Nb(2,"ion-row"),d.Nb(3,"ion-col"),d.Nb(4,"h1"),d.hc(5,"Location"),d.Mb(),d.Mb(),d.Mb(),d.Nb(6,"ion-row"),d.Nb(7,"ion-col"),d.Nb(8,"h5",2),d.hc(9,"Address:"),d.Mb(),d.hc(10),d.Mb(),d.Mb(),d.Nb(11,"ion-row"),d.Nb(12,"ion-col"),d.Nb(13,"agm-map",3),d.Lb(14,"agm-marker",4),d.Mb(),d.Mb(),d.Mb(),d.Nb(15,"ion-row"),d.Nb(16,"ion-col"),d.Nb(17,"h1"),d.hc(18,"Images"),d.Mb(),d.Mb(),d.Mb(),d.Nb(19,"ion-row"),d.Nb(20,"ion-col"),d.Lb(21,"ion-img",5),d.Mb(),d.Nb(22,"ion-col"),d.Nb(23,"agm-map",6),d.Lb(24,"agm-marker",4),d.Mb(),d.Mb(),d.Mb(),d.Nb(25,"ion-row"),d.Nb(26,"ion-col"),d.Nb(27,"h1"),d.hc(28,"Details"),d.Mb(),d.Mb(),d.Mb(),d.Nb(29,"ion-row",7),d.Nb(30,"ion-col",8),d.hc(31,"ID"),d.Mb(),d.Nb(32,"ion-col"),d.hc(33),d.Mb(),d.Mb(),d.Nb(34,"ion-row",7),d.Nb(35,"ion-col",8),d.hc(36,"Type"),d.Mb(),d.Nb(37,"ion-col"),d.hc(38),d.Mb(),d.Mb(),d.gc(39,g,6,1,"ion-row",9),d.gc(40,p,5,1,"ion-row",9),d.gc(41,M,5,1,"ion-row",9),d.gc(42,m,5,2,"ion-row",9),d.Nb(43,"ion-row",7),d.Nb(44,"ion-col",8),d.hc(45,"Is curation needed"),d.Mb(),d.Nb(46,"ion-col"),d.hc(47),d.Mb(),d.Mb(),d.Nb(48,"ion-row",7),d.Nb(49,"ion-col",8),d.hc(50,"Is active"),d.Mb(),d.Nb(51,"ion-col"),d.hc(52),d.Mb(),d.Mb(),d.Nb(53,"ion-row",7),d.Nb(54,"ion-col",8),d.hc(55,"Is deleted"),d.Mb(),d.Nb(56,"ion-col"),d.hc(57),d.Mb(),d.Mb(),d.Nb(58,"ion-row",7),d.Nb(59,"ion-col",8),d.hc(60,"Created date"),d.Mb(),d.Nb(61,"ion-col"),d.hc(62),d.Mb(),d.Mb(),d.gc(63,N,5,1,"ion-row",9),d.gc(64,f,5,1,"ion-row",9),d.gc(65,v,5,1,"ion-row",0),d.Nb(66,"ion-row"),d.Nb(67,"ion-col"),d.Nb(68,"h1"),d.hc(69,"Curation"),d.Mb(),d.Mb(),d.Mb(),d.Nb(70,"ion-row"),d.Nb(71,"ion-col"),d.Nb(72,"h5",2),d.hc(73,"Status:"),d.Mb(),d.hc(74),d.Mb(),d.Mb(),d.Nb(75,"ion-row"),d.Nb(76,"ion-col"),d.Nb(77,"ion-item"),d.Nb(78,"ion-label",10),d.hc(79,"Comment"),d.Mb(),d.Nb(80,"ion-textarea",11),d.Vb("ngModelChange",function(o){return d.dc(i),d.Xb().curationComment=o}),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(81,"ion-row"),d.Nb(82,"ion-col"),d.Nb(83,"ion-button",12),d.Vb("click",function(){return d.dc(i),d.Xb().onApproveButtonClick()}),d.hc(84," Approve "),d.gc(85,A,1,0,"ion-spinner",13),d.Mb(),d.Mb(),d.Nb(86,"ion-col"),d.Nb(87,"ion-button",14),d.Vb("click",function(){return d.dc(i),d.Xb().onRejectButtonClick()}),d.hc(88," Reject (Comment mandatory) "),d.gc(89,w,1,0,"ion-spinner",13),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb()}if(2&i){const i=d.Xb();d.Ab(10),d.jc(" ",i.address," "),d.Ab(3),d.ac("latitude",i.latitude)("longitude",i.longitude)("zoom",17),d.Ab(1),d.ac("latitude",i.latitude)("longitude",i.longitude),d.Ab(7),d.ac("src",i.imageUrl),d.Ab(2),d.ac("latitude",i.latitude)("longitude",i.longitude)("mapTypeId",i.imageMapType)("zoom",19)("mapDraggable",!1),d.Ab(1),d.ac("latitude",i.latitude)("longitude",i.longitude),d.Ab(9),d.ic(i.parkingSpaceId),d.Ab(5),d.ic(i.type),d.Ab(1),d.ac("ngIf",i.isShelter),d.Ab(1),d.ac("ngIf",i.isShelter),d.Ab(1),d.ac("ngIf",!i.isShelter),d.Ab(1),d.ac("ngIf",!i.isShelter&&i.fixedPricePerHour),d.Ab(5),d.ic(i.isCurationNeeded),d.Ab(5),d.ic(i.isActive),d.Ab(5),d.ic(i.isDeleted),d.Ab(5),d.ic(i.displayCreated),d.Ab(1),d.ac("ngIf",i.isShelter),d.Ab(1),d.ac("ngIf",i.isShelter),d.Ab(1),d.ac("ngIf",i.isShelter),d.Ab(9),d.jc(" ",i.curationStatus," "),d.Ab(6),d.ac("ngModel",i.curationComment),d.Ab(5),d.ac("ngIf",i.isApproveButtonLoading),d.Ab(4),d.ac("ngIf",i.isRejectButtonLoading)}}const S=[{path:"",component:(()=>{class i{constructor(i,o,n,t){this.router=i,this.route=o,this.loadingService=n,this.parkingSpaceApiClient=t,this.isLoading=!1,this.isApproveButtonLoading=!1,this.isRejectButtonLoading=!1,this.imageMapType="satellite",this.showLoading=()=>{this.isLoading=!0},this.hideLoading=()=>{this.isLoading=!1},this.showApproveButtonLoading=()=>{this.isApproveButtonLoading=!0},this.hideApproveButtonLoading=()=>{this.isApproveButtonLoading=!1},this.showRejectButtonLoading=()=>{this.isRejectButtonLoading=!0},this.hideRejectButtonLoading=()=>{this.isRejectButtonLoading=!1}}ngOnInit(){this.parkingSpaceId=this.route.snapshot.paramMap.get("parkingSpaceId")}ionViewWillEnter(){return Object(b.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(b.a)(this,void 0,void 0,function*(){yield this.loadData()}),this.showLoading,this.hideLoading)})}onOwnerClick(){return Object(b.a)(this,void 0,void 0,function*(){yield this.router.navigate(["user",this.userId])})}onApproveButtonClick(){return Object(b.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(b.a)(this,void 0,void 0,function*(){yield this.parkingSpaceApiClient.updateCuration(this.parkingSpaceId,{status:s.b.APPROVED,comment:this.curationComment}),yield this.loadData()}),this.showApproveButtonLoading,this.hideApproveButtonLoading)})}onRejectButtonClick(){return Object(b.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(b.a)(this,void 0,void 0,function*(){yield this.parkingSpaceApiClient.updateCuration(this.parkingSpaceId,{status:s.b.REJECTED,comment:this.curationComment}),yield this.loadData()}),this.showRejectButtonLoading,this.hideRejectButtonLoading)})}loadData(){var o,n,t,e,c,a,d,l;return Object(b.a)(this,void 0,void 0,function*(){const b=yield this.parkingSpaceApiClient.getDetails(this.parkingSpaceId);if(this.address=b.address,this.latitude=b.coordinates.lat,this.longitude=b.coordinates.lng,this.imageUrl=b.imageUrl,this.type=b.type,this.userId=b.userId,this.schedule=b.schedule,this.count=b.count,this.fixedPricePerHour=b.fixedPricePerHour,this.isCurationNeeded=(null===(o=null==b?void 0:b.curation)||void 0===o?void 0:o.status)===s.b.PENDING,this.curationStatus=null===(n=null==b?void 0:b.curation)||void 0===n?void 0:n.status,this.curationComment=null!==(e=null===(t=null==b?void 0:b.curation)||void 0===t?void 0:t.comment)&&void 0!==e?e:"",this.isActive=b.isActive,this.isDeleted=b.isDeleted,this.created=b.created,this.description=b.description,this.number=b.number,this.tags=b.tags,this.isShelter=this.type===s.c.SHELTER,this.schedule){this.displaySchedule=null===(c=this.schedule)||void 0===c?void 0:c.days.sort().map(o=>i.HUMAN_READABLE_DAYS[o-1]).join(", ");const o=r().startOf("day").utc().unix(),n=o+(null===(a=this.schedule)||void 0===a?void 0:a.startTimeSeconds),t=o+(null===(d=this.schedule)||void 0===d?void 0:d.endTimeSeconds),e=this.convertUnixTimestampToHumanReadableForm(n,"HH:mm"),b=this.convertUnixTimestampToHumanReadableForm(t,"HH:mm");this.displaySchedule=`${this.displaySchedule} -- ${e} - ${b}`}else this.displaySchedule="Always available";this.displayTags=null===(l=this.tags)||void 0===l?void 0:l.map(i=>i.text).join(", "),this.displayCreated=this.created?this.convertUnixTimestampToHumanReadableForm(this.created,"DD/MM/YYYY HH:mm"):"Unknown"})}convertUnixTimestampToHumanReadableForm(i,o){return r.unix(i).local().locale("ro").format(o).replace(".","")}}return i.HUMAN_READABLE_DAYS=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],i.\u0275fac=function(o){return new(o||i)(d.Kb(a.g),d.Kb(a.a),d.Kb(l.a),d.Kb(s.a))},i.\u0275cmp=d.Eb({type:i,selectors:[["app-parking-space"]],decls:6,vars:2,consts:[[4,"ngIf"],["name","crescent",1,"page-loading"],[2,"display","inline"],[3,"latitude","longitude","zoom"],[3,"latitude","longitude"],[3,"src"],[3,"latitude","longitude","mapTypeId","zoom","mapDraggable"],[1,"underline"],["size","3"],["class","underline",4,"ngIf"],["position","floating"],["auto-grow","true",3,"ngModel","ngModelChange"],["color","success","expand","block",3,"click"],["name","crescent",4,"ngIf"],["color","danger","expand","block",3,"click"],[3,"click"],["name","crescent"]],template:function(i,o){1&i&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-title"),d.hc(3,"Parking space details"),d.Mb(),d.Mb(),d.Mb(),d.gc(4,h,2,0,"ion-content",0),d.gc(5,y,90,31,"ion-content",0)),2&i&&(d.Ab(4),d.ac("ngIf",o.isLoading),d.Ab(1),d.ac("ngIf",!o.isLoading))},directives:[c.l,c.E,c.C,t.i,c.j,c.z,c.k,c.w,c.i,u.b,u.c,c.n,c.p,c.q,c.B,c.K,e.d,e.e,c.e],styles:["ion-spinner.page-loading[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:30px;display:block}agm-map[_ngcontent-%COMP%]{height:500px}.underline[_ngcontent-%COMP%]{border-bottom:1px solid #bababa}a[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),i})()}];let k=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=d.Ib({type:i}),i.\u0275inj=d.Hb({imports:[[a.j.forChild(S)],a.j]}),i})(),C=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=d.Ib({type:i}),i.\u0275inj=d.Hb({imports:[[t.b,e.a,c.F,k,u.a]]}),i})()}}]);