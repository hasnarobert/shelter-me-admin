(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"0dUQ":function(t,n,i){"use strict";i.r(n),i.d(n,"OutstandingBalancesPageModule",function(){return O});var o=i("ofXK"),e=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),c=i("mrSG"),s=i("fXoL"),l=i("xwiS");let d=(()=>{class t{constructor(t){this.baseClient=t}getAllOutstandingBalances(){return Object(c.a)(this,void 0,void 0,function*(){return this.baseClient.doGet("/admin/payout/outstanding-balances/list")})}payAllOutstandingBalances(){return Object(c.a)(this,void 0,void 0,function*(){return this.baseClient.doPost("/admin/payout/outstanding-balances/pay-all")})}}return t.\u0275fac=function(n){return new(n||t)(s.Rb(l.a))},t.\u0275prov=s.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=i("vglk");function b(t,n){1&t&&(s.Nb(0,"ion-content"),s.Lb(1,"ion-spinner",1),s.Mb())}function h(t,n){1&t&&s.Lb(0,"ion-spinner",1)}function g(t,n){if(1&t&&(s.Nb(0,"ion-col"),s.hc(1),s.Mb()),2&t){const t=s.Xb().$implicit;s.Ab(1),s.ic(t.iban)}}function f(t,n){1&t&&(s.Nb(0,"ion-col",6),s.hc(1,"IBAN missing. Will not be paid."),s.Mb())}function p(t,n){if(1&t&&(s.Nb(0,"ion-item"),s.Nb(1,"ion-grid"),s.Nb(2,"ion-row"),s.Nb(3,"ion-col"),s.hc(4),s.Mb(),s.Nb(5,"ion-col"),s.hc(6),s.Mb(),s.gc(7,g,2,1,"ion-col",0),s.gc(8,f,2,0,"ion-col",5),s.Mb(),s.Mb(),s.Mb()),2&t){const t=n.$implicit;s.Ab(4),s.ic(t.userName),s.Ab(2),s.kc("",t.paymentValue.amount," ",t.paymentValue.currency,""),s.Ab(1),s.ac("ngIf",t.iban),s.Ab(1),s.ac("ngIf",!t.iban)}}function y(t,n){if(1&t){const t=s.Ob();s.Nb(0,"ion-content"),s.Nb(1,"ion-card"),s.Nb(2,"ion-card-header"),s.hc(3," Total outstanding balances "),s.Mb(),s.Nb(4,"ion-card-content"),s.Nb(5,"div"),s.hc(6),s.Mb(),s.Nb(7,"ion-button",2),s.Vb("click",function(){return s.dc(t),s.Xb().onPayOutstandingBalancesButtonClick()}),s.hc(8," Pay all outstanding balances "),s.gc(9,h,1,0,"ion-spinner",3),s.Mb(),s.Mb(),s.Mb(),s.Nb(10,"ion-list"),s.Nb(11,"ion-list-header"),s.hc(12,"Individual outstanding balances"),s.Mb(),s.gc(13,p,9,5,"ion-item",4),s.Mb(),s.Mb()}if(2&t){const t=s.Xb();s.Ab(6),s.kc(" ",t.totalAmount," ",t.totalCurrency," "),s.Ab(3),s.ac("ngIf",t.payButtonLoading),s.Ab(4),s.ac("ngForOf",t.items)}}const v=[{path:"",component:(()=>{class t{constructor(t,n){this.payoutApiClient=t,this.loadingService=n,this.items=[],this.showLoading=()=>{this.loading=!0},this.hideLoading=()=>{this.loading=!1},this.showPayLoading=()=>{this.payButtonLoading=!0},this.hidePayLoading=()=>{this.payButtonLoading=!1}}ngOnInit(){}ionViewWillEnter(){return Object(c.a)(this,void 0,void 0,function*(){yield this.reloadData()})}onPayOutstandingBalancesButtonClick(){return Object(c.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(c.a)(this,void 0,void 0,function*(){yield this.payoutApiClient.payAllOutstandingBalances(),yield this.reloadData()}),this.showPayLoading,this.hidePayLoading)})}reloadData(){return Object(c.a)(this,void 0,void 0,function*(){yield this.loadingService.run(()=>Object(c.a)(this,void 0,void 0,function*(){const t=yield this.payoutApiClient.getAllOutstandingBalances();this.totalAmount=t.total.amount,this.totalCurrency=t.total.currency,this.items=t.balances}),this.showLoading,this.hideLoading)})}}return t.\u0275fac=function(n){return new(n||t)(s.Kb(d),s.Kb(u.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-payout"]],decls:6,vars:2,consts:[[4,"ngIf"],["name","crescent"],["expand","block",3,"click"],["name","crescent",4,"ngIf"],[4,"ngFor","ngForOf"],["class","missing-iban",4,"ngIf"],[1,"missing-iban"]],template:function(t,n){1&t&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-title"),s.hc(3,"Outstanding balances"),s.Mb(),s.Mb(),s.Mb(),s.gc(4,b,2,0,"ion-content",0),s.gc(5,y,14,4,"ion-content",0)),2&t&&(s.Ab(4),s.ac("ngIf",n.loading),s.Ab(1),s.ac("ngIf",!n.loading))},directives:[a.l,a.E,a.C,o.i,a.j,a.z,a.f,a.h,a.g,a.e,a.r,a.s,o.h,a.p,a.k,a.w,a.i],styles:["ion-spinner[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:30px;display:block}ion-card[_ngcontent-%COMP%]{text-align:center}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{font-size:2rem}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{color:#000;font-size:3rem}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-left:20px;margin-right:0;position:relative;top:-15px}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:1.5rem}ion-list[_ngcontent-%COMP%]   .missing-iban[_ngcontent-%COMP%]{color:red}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({imports:[[r.j.forChild(v)],r.j]}),t})(),O=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({imports:[[o.b,e.a,a.F,m]]}),t})()},NNol:function(t,n,i){"use strict";i.d(n,"a",function(){return r});var o=i("mrSG"),e=i("fXoL"),a=i("TEn/");let r=(()=>{class t{constructor(t){this.toastController=t}error(t){return Object(o.a)(this,void 0,void 0,function*(){const n=yield this.toastController.create({header:"Error",message:"Something did not work as expected. Try later!",position:"bottom",color:"danger",duration:4e3,buttons:[{text:"Close",role:"cancel"}]});yield n.present(),console.log(`Generic error handler caught: ${JSON.stringify(t,null,4)}`)})}success(t){return Object(o.a)(this,void 0,void 0,function*(){const n=yield this.toastController.create({header:"Success",message:null!=t?t:"Success!",position:"bottom",color:"success",duration:4e3,buttons:[{text:"Close",role:"cancel"}]});yield n.present()})}}return t.\u0275fac=function(n){return new(n||t)(e.Rb(a.L))},t.\u0275prov=e.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},vglk:function(t,n,i){"use strict";i.d(n,"a",function(){return r});var o=i("mrSG"),e=i("fXoL"),a=i("NNol");let r=(()=>{class t{constructor(t){this.jobResultToastService=t}run(t,n,i){return Object(o.a)(this,void 0,void 0,function*(){n();try{yield t()}catch(o){yield this.jobResultToastService.error(o)}finally{i()}})}}return t.\u0275fac=function(n){return new(n||t)(e.Rb(a.a))},t.\u0275prov=e.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},xwiS:function(t,n,i){"use strict";i.d(n,"a",function(){return c});var o=i("mrSG"),e=i("fXoL"),a=i("tk/3"),r=i("ri4K");let c=(()=>{class t{constructor(t,n){this.httpClient=t,this.authenticationService=n}doGet(n,i=!0){return Object(o.a)(this,void 0,void 0,function*(){const o={};return i&&this.insertAuthorizationHeader(o),yield this.httpClient.get(`${t.ENDPOINT}${n}`,{headers:o}).toPromise()})}doPost(n,i=!0,e={}){return Object(o.a)(this,void 0,void 0,function*(){const o={};return i&&this.insertAuthorizationHeader(o),yield this.httpClient.post(`${t.ENDPOINT}${n}`,e,{headers:o}).toPromise()})}insertAuthorizationHeader(t){const n=this.authenticationService.getToken();t.Authorization=`Bearer ${n}`}}return t.ENDPOINT="https://api.goshelter.me",t.\u0275fac=function(n){return new(n||t)(e.Rb(a.a),e.Rb(r.a))},t.\u0275prov=e.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);