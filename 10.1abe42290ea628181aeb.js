(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{F4UR:function(n,t,e){"use strict";e.r(t),e.d(t,"LoginPageModule",function(){return g});var o=e("ofXK"),i=e("3Pt+"),r=e("TEn/"),a=e("tyNb"),c=e("mrSG"),s=e("fXoL"),l=e("xwiS");let d=(()=>{class n{constructor(n){this.baseClient=n}login(n){return Object(c.a)(this,void 0,void 0,function*(){return this.baseClient.doPost("/admin/login",!1,n)})}}return n.\u0275fac=function(t){return new(t||n)(s.Rb(l.a))},n.\u0275prov=s.Gb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=e("ri4K");const u=[{path:"",component:(()=>{class n{constructor(n,t,e,o){this.loginApiClient=n,this.authenticationService=t,this.alertController=e,this.router=o}ngOnInit(){return Object(c.a)(this,void 0,void 0,function*(){})}ionViewWillEnter(){return Object(c.a)(this,void 0,void 0,function*(){this.authenticationService.isAuthenticated()&&(yield this.navigateAwayFromLogin())})}onLoginClick(){return Object(c.a)(this,void 0,void 0,function*(){const n={phoneNumber:this.phoneNumberModel,password:this.passwordModel};let t=null;try{t=yield this.loginApiClient.login(n)}catch(o){return void(yield this.showLoginFailedAlert())}if(!t.success)return void(yield this.showLoginFailedAlert());const e=t.token;yield this.authenticationService.storeToken(e),yield this.navigateAwayFromLogin()})}showLoginFailedAlert(){return Object(c.a)(this,void 0,void 0,function*(){const n=yield this.alertController.create({message:"Login failed",buttons:[{text:"Ok",role:"cancel"}]});yield n.present()})}navigateAwayFromLogin(){return Object(c.a)(this,void 0,void 0,function*(){yield this.router.navigate(["user"])})}}return n.\u0275fac=function(t){return new(t||n)(s.Kb(d),s.Kb(b.a),s.Kb(r.a),s.Kb(a.g))},n.\u0275cmp=s.Eb({type:n,selectors:[["app-login"]],decls:17,vars:2,consts:[["position","stacked"],["type","text",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],["expand","block",3,"click"]],template:function(n,t){1&n&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-title"),s.hc(3,"Login"),s.Mb(),s.Mb(),s.Mb(),s.Nb(4,"ion-content"),s.Nb(5,"ion-card"),s.Nb(6,"ion-card-content"),s.Nb(7,"ion-item"),s.Nb(8,"ion-label",0),s.hc(9,"Phone number"),s.Mb(),s.Nb(10,"ion-input",1),s.Vb("ngModelChange",function(n){return t.phoneNumberModel=n}),s.Mb(),s.Mb(),s.Nb(11,"ion-item"),s.Nb(12,"ion-label",0),s.hc(13,"Password"),s.Mb(),s.Nb(14,"ion-input",2),s.Vb("ngModelChange",function(n){return t.passwordModel=n}),s.Mb(),s.Mb(),s.Nb(15,"ion-button",3),s.Vb("click",function(){return t.onLoginClick()}),s.hc(16,"Login"),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&n&&(s.Ab(10),s.ac("ngModel",t.phoneNumberModel),s.Ab(4),s.ac("ngModel",t.passwordModel))},directives:[r.l,r.E,r.C,r.j,r.f,r.g,r.p,r.q,r.o,r.K,i.d,i.e,r.e],styles:["ion-card[_ngcontent-%COMP%]{width:50%;margin-left:auto;margin-right:auto;margin-top:100px}"]}),n})()}];let h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.Ib({type:n}),n.\u0275inj=s.Hb({imports:[[a.j.forChild(u)],a.j]}),n})(),g=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.Ib({type:n}),n.\u0275inj=s.Hb({imports:[[o.b,i.a,r.F,h]]}),n})()}}]);